import{r as x,p as b,W as k,q as D,c as S,o as i,w as m,a as t,d,b as C,e as N,F as g,g as y,n as j,t as o,l as c,f as p,s as A,m as L,v as U}from"./app-fmBYqYJA.js";import"./index-CGqcT73v.js";import{_ as V}from"./Pagination-CUiNn-QP.js";const B={class:"flex justify-between items-center"},I={class:"flex space-x-2"},E={class:"py-6"},O={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},P={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},T={class:"p-6 bg-white border-b border-gray-200"},F={class:"overflow-x-auto"},M={class:"min-w-full divide-y divide-gray-200"},W={class:"bg-white divide-y divide-gray-200"},$={class:"px-6 py-4 whitespace-nowrap"},q={class:"px-6 py-4 whitespace-nowrap"},z={class:"text-sm text-gray-900"},H={class:"text-sm text-gray-500"},J={class:"px-6 py-4 whitespace-nowrap"},G={key:0,class:"text-sm text-gray-900"},K={key:1,class:"text-sm text-gray-500"},Q={class:"px-6 py-4 whitespace-nowrap"},R={key:0,class:"flex items-center"},X={class:"flex-shrink-0 h-10 w-10"},Y=["src"],Z={class:"ml-4"},tt={class:"text-sm font-medium text-gray-900"},et={class:"text-sm text-gray-500"},st={key:1,class:"text-sm text-gray-500"},at={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ot={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},it=["onClick"],dt={key:0},rt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},nt={class:"mt-1 text-xs p-2 bg-white rounded overflow-x-auto"},lt={class:"mt-1 text-xs space-y-1"},mt={__name:"Index",props:{logs:Object,filters:Object},setup(r){const u=r,n=x({}),l=x({search:u.filters.search||"",event:u.filters.event||""});b(l,a=>{k.get("/activity-logs",{search:a.search,event:a.event},{preserveState:!0,replace:!0})},{deep:!0});const h=a=>({"px-2 py-1 text-xs rounded-full font-medium":!0,"bg-green-100 text-green-800":a==="created","bg-blue-100 text-blue-800":a==="updated","bg-red-100 text-red-800":a==="deleted","bg-gray-100 text-gray-800":!["created","updated","deleted"].includes(a)}),v=a=>new Date(a).toLocaleString(),f=a=>JSON.stringify(a,null,2),_=a=>{n.value={...n.value,[a]:!n.value[a]}};return(a,s)=>{const w=D("DashboardLayout");return i(),S(w,{title:"Activity Logs"},{header:m(()=>[t("div",B,[s[3]||(s[3]=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Activity Logs ",-1)),t("div",I,[c(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>l.value.event=e),class:"rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 text-sm"},s[2]||(s[2]=[t("option",{value:""},"All Events",-1),t("option",{value:"created"},"Created",-1),t("option",{value:"updated"},"Updated",-1),t("option",{value:"deleted"},"Deleted",-1)]),512),[[L,l.value.event]]),c(t("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>l.value.search=e),type:"text",placeholder:"Search...",class:"rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 text-sm"},null,512),[[U,l.value.search]])])])]),default:m(()=>[t("div",E,[t("div",O,[t("div",P,[t("div",T,[t("div",F,[t("table",M,[s[5]||(s[5]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Event "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Description "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Subject "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Causer "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Details ")])],-1)),t("tbody",W,[(i(!0),d(g,null,y(r.logs.data,e=>(i(),d("tr",{key:e.id},[t("td",$,[t("span",{class:j(h(e.event))},o(e.event),3)]),t("td",q,[t("div",z,o(e.description),1),t("div",H,o(e.log_name),1)]),t("td",J,[e.subject?(i(),d("div",G,o(e.subject_type)+" #"+o(e.subject_id),1)):(i(),d("div",K," N/A "))]),t("td",Q,[e.causer?(i(),d("div",R,[t("div",X,[t("img",{class:"h-10 w-10 rounded-full",src:e.causer.profile_photo_url,alt:""},null,8,Y)]),t("div",Z,[t("div",tt,o(e.causer.name),1),t("div",et,o(e.causer.email),1)])])):(i(),d("div",st," System "))]),t("td",at,o(v(e.created_at)),1),t("td",ot,[t("button",{onClick:ct=>_(e.id),class:"text-indigo-600 hover:text-indigo-900"},o(n.value[e.id]?"Hide":"Show"),9,it)])]))),128)),r.logs.data.length===0?(i(),d("tr",dt,s[4]||(s[4]=[t("td",{colspan:"6",class:"px-6 py-4 text-center text-sm text-gray-500"}," No activity logs found ",-1)]))):N("",!0)])])]),(i(!0),d(g,null,y(r.logs.data,e=>c((i(),d("div",{key:"details-"+e.id,class:"mt-4 p-4 bg-gray-50 rounded-lg"},[t("div",rt,[t("div",null,[s[6]||(s[6]=t("h3",{class:"text-sm font-medium text-gray-500"},"Properties",-1)),t("pre",nt,o(f(e.properties)),1)]),t("div",null,[s[10]||(s[10]=t("h3",{class:"text-sm font-medium text-gray-500"},"Technical Info",-1)),t("div",lt,[t("p",null,[s[7]||(s[7]=t("span",{class:"font-medium"},"IP:",-1)),p(" "+o(e.ip_address),1)]),t("p",null,[s[8]||(s[8]=t("span",{class:"font-medium"},"User Agent:",-1)),p(" "+o(e.user_agent),1)]),t("p",null,[s[9]||(s[9]=t("span",{class:"font-medium"},"Batch UUID:",-1)),p(" "+o(e.batch_uuid||"N/A"),1)])])])])])),[[A,n.value[e.id]]])),128)),C(V,{links:r.logs.links,class:"mt-4"},null,8,["links"])])])])])]),_:1})}}};export{mt as default};
