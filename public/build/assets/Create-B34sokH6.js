import{z as S,p as V,c as y,o as l,w as b,b as p,a as e,u as g,j as F,S as M,f,m as N,k as m,d as a,e as i,n as u,l as c,t as d,F as I,g as U,v as B,W as z}from"./app-C12tQq4w.js";import{A,T as D}from"./index-50MrqWK3.js";import{_ as P}from"./DashLayout-C3RqFv1X.js";import"./logo-CL_3b9da.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"max-w-3xl mx-auto"},T={class:"mb-8"},j={class:"flex items-center justify-between"},O={class:"bg-white shadow rounded-lg overflow-hidden"},J={class:"p-6 space-y-6"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},E={class:"md:col-span-2"},G={key:0,class:"mt-1 text-sm text-red-600"},q=["value"],K={key:0,class:"mt-1 text-sm text-red-600"},$={key:0,class:"mt-1 text-sm text-red-600"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Q={class:"h-64 md:h-full"},X={class:"space-y-4"},Y={class:"grid grid-cols-2 gap-4"},Z={key:0,class:"mt-1 text-sm text-red-600"},_={key:0,class:"mt-1 text-sm text-red-600"},ee={key:0,class:"mt-1 text-sm text-red-600"},te={class:"px-6 py-3 bg-gray-50 text-right border-t border-gray-200"},re=["disabled"],se={key:0,class:"fas fa-circle-notch fa-spin mr-2"},oe={key:1,class:"fas fa-triangle-exclamation mr-2"},me={__name:"Create",props:{errors:Object,typeOptions:Array},setup(s){const x="AIzaSyCze3Rf8MLdkVJeRk207bfNJ6tqs41WLhU",h={lat:-1.2921,lng:36.8219},r=S({name:"",type:"",area:"",details:"",lat:"",lng:"",processing:!1}),v=V(()=>r.lat&&r.lng?{lat:parseFloat(r.lat),lng:parseFloat(r.lng)}:h),w=n=>{r.lat=n.latLng.lat(),r.lng=n.latLng.lng()},k=n=>{r.lat=n.latLng.lat(),r.lng=n.latLng.lng()},C=()=>{z.post(route("incidents.store"),r,{onStart:()=>r.processing=!0,onFinish:()=>r.processing=!1,preserveScroll:!0})},L=()=>{r.name="",r.type="",r.area="",r.details="",r.lat="",r.lng=""};return(n,t)=>(l(),y(P,null,{default:b(()=>[p(g(F),{title:"Report New Incident"}),e("div",R,[e("div",T,[e("div",j,[t[7]||(t[7]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-800"},"Report New Incident"),e("p",{class:"mt-1 text-sm text-gray-600"},"Provide details about the incident you're reporting")],-1)),p(g(M),{href:n.route("incidents.index"),class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},{default:b(()=>t[6]||(t[6]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),f(" Cancel ")])),_:1},8,["href"])])]),e("div",O,[e("form",{onSubmit:N(C,["prevent"])},[e("div",J,[e("div",null,[t[12]||(t[12]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4 pb-2 border-b border-gray-200"},"Basic Information",-1)),e("div",W,[e("div",E,[t[8]||(t[8]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Incident Title *",-1)),m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>r.name=o),type:"text",id:"name",class:u(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500 sm:text-sm",{"border-red-300":s.errors.name}]),placeholder:"Brief description of the incident"},null,2),[[c,r.name]]),s.errors.name?(l(),a("p",G,d(s.errors.name),1)):i("",!0)]),e("div",null,[t[10]||(t[10]=e("label",{for:"type",class:"block text-sm font-medium text-gray-700"},"Incident Type *",-1)),m(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>r.type=o),id:"type",class:u(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500 sm:text-sm",{"border-red-300":s.errors.type}])},[t[9]||(t[9]=e("option",{value:"",disabled:""},"Select incident type",-1)),(l(!0),a(I,null,U(s.typeOptions,o=>(l(),a("option",{value:o,key:o},d(o.replace("_"," ")),9,q))),128))],2),[[B,r.type]]),s.errors.type?(l(),a("p",K,d(s.errors.type),1)):i("",!0)]),e("div",null,[t[11]||(t[11]=e("label",{for:"area",class:"block text-sm font-medium text-gray-700"},"Area/Location *",-1)),m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>r.area=o),type:"text",id:"area",class:u(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500 sm:text-sm",{"border-red-300":s.errors.area}]),placeholder:"Neighborhood, landmark, or address"},null,2),[[c,r.area]]),s.errors.area?(l(),a("p",$,d(s.errors.area),1)):i("",!0)])])]),e("div",null,[t[17]||(t[17]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4 pb-2 border-b border-gray-200"},"Location on Map",-1)),e("div",H,[e("div",Q,[p(g(A),{"api-key":g(x),style:{width:"100%",height:"100%"},center:v.value,zoom:15,onClick:w},{default:b(()=>[r.lat&&r.lng?(l(),y(g(D),{key:0,options:{position:{lat:parseFloat(r.lat),lng:parseFloat(r.lng)},draggable:!0,icon:{url:"https://maps.google.com/mapfiles/ms/icons/red-dot.png",scaledSize:{width:32,height:32}}},onDragend:k},null,8,["options"])):i("",!0)]),_:1},8,["api-key","center"])]),e("div",null,[e("div",X,[t[15]||(t[15]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Pin Location"),e("p",{class:"mt-1 text-sm text-gray-500"}," Click on the map or drag the marker to set the exact location ")],-1)),e("div",Y,[e("div",null,[t[13]||(t[13]=e("label",{for:"lat",class:"block text-sm font-medium text-gray-700"},"Latitude *",-1)),m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>r.lat=o),type:"number",step:"any",id:"lat",class:u(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500 sm:text-sm",{"border-red-300":s.errors.lat}]),readonly:""},null,2),[[c,r.lat]]),s.errors.lat?(l(),a("p",Z,d(s.errors.lat),1)):i("",!0)]),e("div",null,[t[14]||(t[14]=e("label",{for:"lng",class:"block text-sm font-medium text-gray-700"},"Longitude *",-1)),m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>r.lng=o),type:"number",step:"any",id:"lng",class:u(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500 sm:text-sm",{"border-red-300":s.errors.lng}]),readonly:""},null,2),[[c,r.lng]]),s.errors.lng?(l(),a("p",_,d(s.errors.lng),1)):i("",!0)])]),t[16]||(t[16]=e("div",{class:"bg-gray-50 p-3 rounded-md text-sm text-gray-600"},[e("i",{class:"fas fa-info-circle mr-1 text-red-600"}),f(" For precise location, you can search coordinates on "),e("a",{href:"https://www.latlong.net/",target:"_blank",class:"text-red-600 hover:underline"},"latlong.net"),f(" and paste them here ")],-1))])])])]),e("div",null,[t[19]||(t[19]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4 pb-2 border-b border-gray-200"},"Incident Details",-1)),e("div",null,[t[18]||(t[18]=e("label",{for:"details",class:"block text-sm font-medium text-gray-700"},"Description *",-1)),m(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=o=>r.details=o),id:"details",rows:"4",class:u(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500 sm:text-sm",{"border-red-300":s.errors.details}]),placeholder:"Provide detailed information about what happened..."},null,2),[[c,r.details]]),s.errors.details?(l(),a("p",ee,d(s.errors.details),1)):i("",!0)])]),t[20]||(t[20]=e("div",null,[e("h2",{class:"text-lg font-medium text-gray-900 mb-4 pb-2 border-b border-gray-200"},"Evidence (Optional)"),e("div",{class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md"},[e("div",{class:"space-y-1 text-center"},[e("div",{class:"flex text-sm text-gray-600"},[e("label",{for:"file-upload",class:"relative cursor-pointer bg-white rounded-md font-medium text-red-600 hover:text-red-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-red-500"},[e("span",null,"Upload photos or videos"),e("input",{id:"file-upload",name:"file-upload",type:"file",class:"sr-only",multiple:""})]),e("p",{class:"pl-1"},"or drag and drop")]),e("p",{class:"text-xs text-gray-500"}," PNG, JPG, MP4 up to 10MB ")])])],-1))]),e("div",te,[e("button",{type:"button",onClick:L,class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 mr-3"}," Reset Form "),e("button",{type:"submit",disabled:r.processing,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-75"},[r.processing?(l(),a("i",se)):(l(),a("i",oe)),f(" "+d(r.processing?"Submitting...":"Report Incident"),1)],8,re)])],32)])])]),_:1}))}};export{me as default};
