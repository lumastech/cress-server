import{p as m,d as n,o as r,a as e,F as g,g as f,t as y,b as h,w as b,f as v,u as $,S as _,n as w,e as p,j as k}from"./app-CiYYmUM_.js";import{_ as A}from"./DashLayout-7TUviNwe.js";import{_ as x}from"./StatCard-TBGCiVHL.js";import"./logo-CL_3b9da.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"relative h-full w-full"},B=["width","height"],E=["x","y","width","height"],G=["x"],D={__name:"BarChart",props:{data:Array,labels:Array,width:{type:Number,default:300},height:{type:Number,default:200}},setup(t){const s=t,c=m(()=>Math.max(...s.data,1)),d=m(()=>s.data.map(o=>o/c.value));return(o,l)=>(r(),n("div",T,[(r(),n("svg",{width:t.width,height:t.height,class:"w-full h-full"},[l[0]||(l[0]=e("line",{x1:"0",y1:"100%",x2:"100%",y2:"100%",stroke:"#E5E7EB","stroke-width":"1"},null,-1)),(r(!0),n(g,null,f(d.value,(a,i)=>(r(),n("rect",{key:i,x:`${i/t.data.length*100}%`,y:`${100-a*100}%`,width:`${90/t.data.length}%`,height:`${a*100}%`,fill:"#10B981",rx:"2"},null,8,E))),128)),(r(!0),n(g,null,f(t.labels,(a,i)=>(r(),n("text",{key:"label"+i,x:`${(i+.5)/t.labels.length*100}%`,y:"105%","text-anchor":"middle","font-size":"10",fill:"#6B7280"},y(a),9,G))),128))],8,B))]))}},F={class:"relative h-full w-full"},N=["width","height"],V=["y1","y2"],j=["points"],C=["cx","cy"],S=["x"],z={__name:"LineChart",props:{data:Array,labels:Array,width:{type:Number,default:300},height:{type:Number,default:200}},setup(t){const s=t,c=m(()=>Math.max(...s.data,1)),d=m(()=>s.data.map(l=>l/c.value)),o=m(()=>s.data.map((l,a)=>{const i=a/(s.data.length-1)*100,u=100-l/c.value*100;return`${i}%,${u}%`}).join(" "));return(l,a)=>(r(),n("div",F,[(r(),n("svg",{width:t.width,height:t.height,class:"w-full h-full"},[a[0]||(a[0]=e("line",{x1:"0",y1:"100%",x2:"100%",y2:"100%",stroke:"#E5E7EB","stroke-width":"1"},null,-1)),a[1]||(a[1]=e("line",{x1:"0",y1:"0",x2:"0",y2:"100%",stroke:"#E5E7EB","stroke-width":"1"},null,-1)),(r(),n(g,null,f(5,(i,u)=>e("line",{key:"h"+u,x1:"0",y1:`${100-u*25}%`,x2:"100%",y2:`${100-u*25}%`,stroke:"#F3F4F6","stroke-width":"1"},null,8,V)),64)),e("polyline",{fill:"none",stroke:"#3B82F6","stroke-width":"2",points:o.value},null,8,j),(r(!0),n(g,null,f(d.value,(i,u)=>(r(),n("circle",{key:u,cx:`${u/(d.value.length-1)*100}%`,cy:`${100-i*100}%`,r:"4",fill:"#3B82F6"},null,8,C))),128)),(r(!0),n(g,null,f(t.labels,(i,u)=>(r(),n("text",{key:"label"+u,x:`${u/(t.labels.length-1)*100}%`,y:"105%","text-anchor":"middle","font-size":"10",fill:"#6B7280"},y(i),9,S))),128))],8,N))]))}},U={class:"bg-white p-6 rounded-xl shadow"},L={class:"flex items-center justify-between mb-4"},M={class:"space-y-3"},I={class:"flex-1 min-w-0"},O={class:"text-sm text-gray-800"},P={class:"font-medium"},R={key:0,class:"font-medium"},q={class:"text-xs text-gray-400"},H={__name:"ActivityFeed",props:{activities:Array},setup(t){const s=c=>c.description.includes("created")?"green":c.description.includes("deleted")?"red":"blue";return(c,d)=>(r(),n("div",U,[e("div",L,[d[1]||(d[1]=e("h3",{class:"text-lg font-semibold text-gray-700"},"Recent Activity",-1)),h($(_),{href:"/admin/activity-log",class:"text-sm text-blue-500 hover:underline"},{default:b(()=>d[0]||(d[0]=[v(" View All ")])),_:1})]),e("ul",M,[(r(!0),n(g,null,f(t.activities,(o,l)=>(r(),n("li",{key:l,class:"flex items-start gap-3 p-2 hover:bg-gray-50 rounded"},[e("div",{class:w(["flex-shrink-0 mt-1",`text-${s(o)}-500`])},[e("i",{class:w(o.icon||"fa-solid fa-circle-info")},null,2)],2),e("div",I,[e("p",O,[e("span",P,y(o.causer),1),v(" "+y(o.description)+" ",1),o.subject?(r(),n("span",R,'"'+y(o.subject)+'"',1)):p("",!0)]),e("p",q,y(o.time),1)])]))),128))])]))}},J={class:"space-y-6"},K={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},Q={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},W={class:"bg-white p-6 rounded-xl shadow-lg"},X={class:"h-64"},Y={class:"bg-white p-6 rounded-xl shadow-lg"},Z={class:"h-64"},nt={__name:"Dashboard",props:{stats:Object,alertTrends:Array,userGrowth:Array,recentActivities:Array},setup(t){const s=t,c=m(()=>{if(s.alertTrends.length<2)return 0;const o=s.alertTrends[s.alertTrends.length-1].count,l=s.alertTrends[s.alertTrends.length-2].count;return(o-l)/l*100}),d=m(()=>{if(s.userGrowth.length<2)return 0;const o=s.userGrowth[s.userGrowth.length-1].count,l=s.userGrowth[s.userGrowth.length-2].count;return(o-l)/l*100});return(o,l)=>(r(),n(g,null,[h($(k),{title:"Dashboard"}),h(A,null,{default:b(()=>[e("div",J,[e("div",K,[h(x,{title:"Total Users",value:t.stats.totalUsers,icon:"users",color:"blue",trend:d.value},null,8,["value","trend"]),h(x,{title:"Active Alerts",value:t.stats.activeAlerts,icon:"bell",color:"red",trend:c.value},null,8,["value","trend"]),h(x,{title:"Incidents (24h)",value:t.stats.incidentsToday,icon:"triangle-exclamation",color:"yellow"},null,8,["value"]),h(x,{title:"System Uptime",value:t.stats.systemUptime,icon:"shield-halved",color:"green"},null,8,["value"])]),e("div",Q,[e("div",W,[l[0]||(l[0]=e("h3",{class:"text-xl font-semibold text-gray-700 mb-4"},"Alert Trends (7 days)",-1)),e("div",X,[h(z,{data:t.alertTrends.map(a=>a.count),labels:t.alertTrends.map(a=>new Date(a.date).toLocaleDateString("en",{month:"short",day:"numeric"}))},null,8,["data","labels"])])]),e("div",Y,[l[1]||(l[1]=e("h3",{class:"text-xl font-semibold text-gray-700 mb-4"},"User Growth (30 days)",-1)),e("div",Z,[h(D,{data:t.userGrowth.map(a=>a.count),labels:t.userGrowth.map(a=>new Date(a.date).toLocaleDateString("en",{month:"short",day:"numeric"}))},null,8,["data","labels"])])])]),h(H,{activities:t.recentActivities},null,8,["activities"])])]),_:1})],64))}};export{nt as default};
