import{r as x,p as w,W as b,c as k,o as i,w as m,a as t,b as D,d,e as S,F as g,g as y,n as C,t as o,l as c,f as p,q as N,m as j,v as A}from"./app-aCt3ZkO7.js";import{_ as U}from"./DashLayout-CGGBA7IC.js";import{_ as V}from"./Pagination-DkBIbsgI.js";import"./logo-CL_3b9da.js";const B={class:"flex justify-between items-center"},I={class:"flex space-x-2"},L={class:"py-6"},E={class:"grid grid-cols-6 gap-4"},O={class:"md:col-span-4 bg-white overflow-hidden shadow-sm sm:rounded-lg"},P={class:"p-6 bg-white border-b border-gray-200"},T={class:"overflow-x-auto"},$={class:"min-w-full divide-y divide-gray-200"},F={class:"bg-white divide-y divide-gray-200"},M={class:"px-1 py-1 whitespace-nowrap"},W={class:"px-2 py-2 whitespace-nowrap"},q={class:"text-sm text-gray-900"},z={class:"text-sm text-gray-500"},H={class:"px-2 py-2 whitespace-nowrap"},J={key:0,class:"text-sm text-gray-900"},G={key:1,class:"text-sm text-gray-500"},K={class:"px-2 py-2 whitespace-nowrap"},Q={key:0,class:"flex items-center"},R={class:"flex-shrink-0 h-10 w-10"},X=["src"],Y={class:"ml-4"},Z={class:"text-sm font-medium text-gray-900"},tt={class:"text-sm text-gray-500"},et={key:1,class:"text-sm text-gray-500"},st={class:"px-2 py-2 whitespace-nowrap text-sm text-gray-500"},at={class:"px-2 py-2 whitespace-nowrap text-sm font-medium"},ot=["onClick"],it={key:0},dt={class:"md:col-span-2"},rt={class:"mt-1 text-xs space-y-1"},nt={class:"mt-1 text-xs p-2 bg-white rounded overflow-x-auto"},mt={__name:"Index",props:{logs:Object,filters:Object},setup(r){const u=r,n=x({}),l=x({search:u.filters.search||"",event:u.filters.event||""});w(l,a=>{b.get("/activity-logs",{search:a.search,event:a.event},{preserveState:!0,replace:!0})},{deep:!0});const v=a=>({"px-2 py-2 text-xs rounded-full font-medium":!0,"bg-green-100 text-green-800":a==="created","bg-blue-100 text-blue-800":a==="updated","bg-red-100 text-red-800":a==="deleted","bg-gray-100 text-gray-800":!["created","updated","deleted"].includes(a)}),f=a=>new Date(a).toLocaleString(),h=a=>JSON.stringify(a,null,2),_=a=>{n.value={...n.value,[a]:!n.value[a]}};return(a,s)=>(i(),k(U,{title:"Activity Logs"},{header:m(()=>[t("div",B,[s[3]||(s[3]=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Activity Logs ",-1)),t("div",I,[c(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>l.value.event=e),class:"rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 text-sm"},s[2]||(s[2]=[t("option",{value:""},"All Events",-1),t("option",{value:"created"},"Created",-1),t("option",{value:"updated"},"Updated",-1),t("option",{value:"deleted"},"Deleted",-1)]),512),[[j,l.value.event]]),c(t("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>l.value.search=e),type:"text",placeholder:"Search...",class:"rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 text-sm"},null,512),[[A,l.value.search]])])])]),default:m(()=>[t("div",L,[t("div",E,[t("div",O,[t("div",P,[t("div",T,[t("table",$,[s[5]||(s[5]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Event "),t("th",{scope:"col",class:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Description "),t("th",{scope:"col",class:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Subject "),t("th",{scope:"col",class:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Causer "),t("th",{scope:"col",class:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),t("th",{scope:"col",class:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Details ")])],-1)),t("tbody",F,[(i(!0),d(g,null,y(r.logs.data,e=>(i(),d("tr",{key:e.id},[t("td",M,[t("span",{class:C(v(e.event))},o(e.event),3)]),t("td",W,[t("div",q,o(e.description),1),t("div",z,o(e.log_name),1)]),t("td",H,[e.subject?(i(),d("div",J,o(e.subject_type)+" #"+o(e.subject_id),1)):(i(),d("div",G," N/A "))]),t("td",K,[e.causer?(i(),d("div",Q,[t("div",R,[t("img",{class:"h-10 w-10 rounded-full",src:e.causer.profile_photo_url,alt:""},null,8,X)]),t("div",Y,[t("div",Z,o(e.causer.name),1),t("div",tt,o(e.causer.email),1)])])):(i(),d("div",et," System "))]),t("td",st,o(f(e.created_at)),1),t("td",at,[t("button",{onClick:lt=>_(e.id),class:"text-indigo-600 hover:text-indigo-900"},o(n.value[e.id]?"Hide":"Show"),9,ot)])]))),128)),r.logs.data.length===0?(i(),d("tr",it,s[4]||(s[4]=[t("td",{colspan:"6",class:"px-2 py-2 text-center text-sm text-gray-500"}," No activity logs found ",-1)]))):S("",!0)])])]),D(V,{links:r.logs.links,class:"mt-4"},null,8,["links"])])]),t("div",dt,[(i(!0),d(g,null,y(r.logs.data,e=>c((i(),d("div",{key:"details-"+e.id,class:"mt-4 p-4 bg-gray-50 rounded-lg"},[t("div",null,[s[9]||(s[9]=t("h3",{class:"text-sm font-medium text-gray-500"},"Technical Info",-1)),t("div",rt,[t("p",null,[s[6]||(s[6]=t("span",{class:"font-medium"},"IP:",-1)),p(" "+o(e.ip_address),1)]),t("p",null,[s[7]||(s[7]=t("span",{class:"font-medium"},"User Agent:",-1)),p(" "+o(e.user_agent),1)]),t("p",null,[s[8]||(s[8]=t("span",{class:"font-medium"},"Batch UUID:",-1)),p(" "+o(e.batch_uuid||"N/A"),1)])])]),t("div",null,[s[10]||(s[10]=t("h3",{class:"text-sm font-medium text-gray-500"},"Properties",-1)),t("pre",nt,o(h(e.properties)),1)])])),[[N,n.value[e.id]]])),128))])])])]),_:1}))}};export{mt as default};
